<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <title>Title of the document</title>
        <style>
        .box {
            display: -webkit-box;
            display: -moz-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            width: auto;
            height: flex;
        }
        .box form {
            width: flex;
            padding: 15px;
            text-align: center;
            color: #000000;
            font-family: arial, sans-serif;
        }
        .apt_btn {
            background-color: green;
        }
        .apt {
            background-color: blue;
        }
        .sale {
            background-color: gray;
        }
        .sale_btn {
            background-color: pink;
        }
        #radioContainer {
            position: relative;
            width: auto;
            height: 300px;
            float:left;
            overflow-y:scroll;
        }
        </style>
    </head>

    <body>
        <h2>Today Appointment</h2>
        <form class="box" action="" method="POST">
        {% csrf_token %}

            <div class="apt_btn">Appointment Button
                <input type="submit" name="appointment_btn" value="Trigger" />
                <input type="submit" name="appointment_btn" value="Modify" />
                <input type="submit" name="appointment_btn" value="Cancel" />
            </div>

            <div class="apt">
                <fieldset id="radioContainer">
                    <legend>Appointments</legend>
                        
                        {% for name, begin, end, price, id, checked in appointments %}
                            <input {{ checked }} type="radio" name="appointment" value="{{ id }}"/>
                                <a>Customer: {{name.0}} {{name.1}}. </a>
                                <a>Start time: {{begin}}. </a>
                                <a>End time: {{end}}. </a>
                                <a>Total charge: {{price}}. </a>
                            <br><br>
                        {% endfor %}
                    
                </fieldset>
            </div>

            <div class="sale">Sale
                <!-- loop through sales list -->
            </div>

            <div class="sale_btn">Sale Button
                {% if sales|length == 0 %}
                    <input type="submit" name="sale_btn" value="Modify" disabled />
                    <input type="submit" name="sale_btn" value="Cancel" disabled />
                {% else %}
                    <input type="submit" name="sale_btn" value="Modify" />
                    <input type="submit" name="sale_btn" value="Cancel" />
                {% endif %}
            </div>
        </form>
        <script type="text/javascript">
            if (document.querySelector('input[name="appointment"]')) {
                document.querySelectorAll('input[name="appointment"]').forEach((elem) => {
                    elem.addEventListener("change", function(event) {
                        var item = event.target.value;
                        $.ajax({
                            url: "/manager/",
                            type: "POST",
                            dataType: "json",
                            data: {
                                csrfmiddlewaretoken: '{{ csrf_token }}',
                                appointment: item
                            },
                            success: (data) => {
                                console.log(data);
                            },
                            error: (error) => {
                                console.log(error);
                            }
                        });
                    });
                });
            }
        </script>
    </body>
</html>