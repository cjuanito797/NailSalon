{% extends "base.html" %}
{% load static %}
{% block title %}<title>Choose Technician Below</title>{% endblock %}

{% block navigation %}
    <nav class="navbar" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="{% url 'account:home' %}">
                <strong class="is is-size-4">Apple Nail Salon & Spa</strong>
            </a>

            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"
               data-target="navbarBasicExample">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>

        <div id="navbarBasicExample" class="navbar-menu">
            <div class="navbar-start">
                <a class="navbar-item" href="{% url 'account:gallery' %}">
                    Gallery
                </a>

                <a class="navbar-item" href="{% url 'account:services' %}">
                    Our Services
                </a>

                <a class="navbar-item" href="{% url 'account:aboutUs' %}">
                    About Us
                </a>

                {% if request.user.is_authenticated %}
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a class="navbar-link has-text-black">
                            My Account
                        </a>

                        <div class="navbar-dropdown" style="color: black;">
                            <a class="navbar-item">
                                My Appointment History
                            </a>
                            <a class="navbar-item">
                                My Profile
                            </a>
                            <a class="navbar-item" style="color: black;">
                                My Promotions
                            </a>
                            <hr class="navbar-divider">
                            <a class="navbar-item">
                                Security Settings
                            </a>
                        </div>
                    </div>
                {% endif %}

                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link has-text-black">
                        More
                    </a>

                    <div class="navbar-dropdown" style="color: black;">
                        <a class="navbar-item">
                            About
                        </a>
                        <a class="navbar-item">
                            Jobs
                        </a>
                        <a class="navbar-item" style="color: black;">
                            Contact
                        </a>
                        <hr class="navbar-divider">
                        <a class="navbar-item">
                            Report an issue
                        </a>
                    </div>
                </div>
            </div>

            <div class="navbar-end">
                <div class="navbar-item">
                    <div class="buttons">

                        <a href="{% url 'cart:cart_detail' %}" class="has-text-black">
                            <img src="../../../Account/static/shopping_bag.png" style=""/>
                            {% with total_items=cart|length %}
                                {% if cart|length > 0 %}
                                    ${{ cart.get_total_price }}&emsp;&emsp;&emsp;

                                {% else %}
                                    Empty
                                {% endif %}
                            {% endwith %}
                        </a>

                        <a class="button is-success" href="{% url 'appointments:service_list' %}">
                            Book Appointment
                        </a>

                        <a class="button is-light" href="{% url 'account:logout' %}">
                            Sign Out
                        </a>

                    </div>
                </div>
            </div>
        </div>
    </nav>
{% endblock %}

{% block mainbody %}
    <section class="section">
        {% if messages %}
            {% for message in messages %}

                <artcile class="message is-danger is-size-5-desktop">
                    <div class="message-header">
                        <p>Please Correct Error Below</p>
                    </div>
                    <div class="message-body">
                        {{ message }}
                    </div>
                </artcile>
            {% endfor %}

        {% endif %}

    </section>

    <section class="hero is-fullheight">
        <div class="hero-head has-text-centered">
            <div class="">
                <p class="title has-text-black">
                    Please choose from one of our technicians below.
                    <br>


                </p>
                <progress class="progress is-primary is-medium has-text-black" value="50" max="100"
                          style="position: absolute; width: 50%; margin-left: 30%;">50%
                </progress>


            </div>
        </div>

        <section class="field-body"
                 style="position: absolute; margin-right: -10%; border-right: 1px solid black; height: 75%; width: 15%;">

            <div class="container"
                 style=" position:absolute; width: 50%; height: 50%; margin-left: 25%; margin-right: 5%; margin-top: 10%;">
                <p class="title is-5 has-text-black">Your Services </p>


                <!-- iterate through the cart and display their services-->
                <div class="container" style="height: 45%; overflow-y: scroll; overflow-x: hidden;">
                    {% for item in cart %}
                        <p>{{ item.service }} x {{ item.quantity }}</p>
                    {% endfor %}
                </div>


                <a class="is-underlined" href="{% url "cart:cart_detail" %}">
                    Edit Your Services
                </a>

            </div>

            <div class="container" style="position: relative; margin-top: 100%;">
                <button class="button is-info is-fullwidth">Random Technician</button>

            </div>
        </section>
        <section class="field-body"
                 style="margin-left: 35%; margin-top: 5%; position: relative; margin-right: 5%;  margin-bottom: 10%;">

            <!--render a box in here to hold the dates-->
            <div class="container"
                 style=" margin-top: 5%; width: 100%;  position: relative; height: 75%; background-color: transparent; border: none; overflow-y: scroll; overflow-x: hidden;">
                <div class="p-4 columns is-flex-wrap-wrap">

                    {% for tech in techs %}
                        <!-- create a styled box for each of the dates and then render them that way-->
                        <div class="card" style="width: 18rem; margin: 1%;">

                            <div class="container">
                                <figure class="mx-auto">
                                    <img {% if tech.profilePicture %}src="{{ tech.profilePicture.url }}" {% else %}
                                         src="../../static/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg" {% endif %}
                                         alt="Placeholder image"
                                         style="width: 100px; height: 100px; border-radius: 50%; align-items: center;
                                            justify-content: center; display: flex; margin-left: 30%; margin-top: 10%;"
                                    >
                                </figure>
                            </div>
                            <div class="card-content">
                                <div class="media">

                                    <div class="media-content">
                                        <p class="title is-4 has-text-black">{{ tech.user.first_name }} {{ tech.user.last_name }}</p>
                                        <p class="subtitle is-6 has-text-black">{{ tech.user.email }}</p>
                                    </div>
                                </div>

                                <div class="content">
                                    {{ tech.bio }}
                                </div>
                            </div>
                            <!-- render a button for scheduling -->
                            <footer class="card-footer">
                                <p class="card-footer-item">
                                    <button class="button is-primary">Schedule Now!</button>
                                </p>
                            </footer>
                        </div>

                    {% endfor %}
                </div>
            </div>
        </section>

    </section>
{% endblock %}